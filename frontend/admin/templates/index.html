{% extends "base.html" %}

{% block title %}Receptionist Dashboard{% endblock %}

{% block content %}
<!-- Dashboard Header -->
<div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6">
  <!-- <h2 class="text-2xl font-semibold text-dark mb-2 lg:mb-0">Welcome, {{ username|default('Rita') }}!</h2> -->
  <h2 class="text-xl sm:text-2xl font-semibold text-dark">Welcome, {{ current_user.username }}!</h2>

  <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
    <div class="bg-white p-3 rounded-lg shadow-sm w-full lg:w-auto">
      <i class="fas fa-calendar text-secondary mr-2"></i>
      <span id="current-date">{{ current_date|default('Monday, October 16, 2023') }}</span> |
      <i class="fas fa-clock text-secondary ml-2 mr-2"></i>
      <span id="current-time">{{ current_time|default('10:30:45 AM') }}</span>
    </div>
    <!-- <button id="check-in-btn"
            class="bg-secondary hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center">
            <i class="fas fa-user-plus mr-2"></i> Check In Visitor
        </button> -->
  </div>
</div>




<!-- Dashboard Header -->
<!-- <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6">
    <h2 class="text-xl sm:text-2xl font-semibold text-dark">Welcome, {{ current_user.username }}!</h2>

    <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
        <div class="bg-gradient-to-r from-purple-500/60 via-pink-500/60 to-red-500/60 
                    border border-white/30 text-white font-medium p-3 rounded-lg shadow-lg 
                    flex items-center justify-center gap-2">
            <i class="fas fa-calendar text-white"></i>
            <span id="current-date">{{ current_date|default('Monday, October 16, 2023') }}</span>
            <i class="fas fa-clock text-white ml-2"></i>
            <span id="current-time">{{ current_time|default('10:30:45 AM') }}</span>
        </div>
    </div>
</div> -->

<!-- Stats Section -->
<div class="stats-grid mb-8 grid grid-cols-1 sm:grid-cols-3 gap-5">
  <!-- Today's Visitors -->
  <div
    class="bg-gradient-to-r from-purple-500/80 via-pink-500/80 to-red-500/80 text-white p-5 rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-all duration-300">
    <div class="flex justify-between items-center mb-4">
      <div class="font-medium">Today's Visitors</div>
      <div class="w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center">
        <i class="fas fa-user-friends"></i>
      </div>
    </div>
    <div id="today-visitors" class="text-3xl font-bold mb-1">
      {{ today_visitors }}
    </div>
    <div class="text-white/80 text-sm">Today Visitors</div>
  </div>

  <!-- Total Visitors -->
  <div
    class="bg-gradient-to-r from-indigo-500/80 via-sky-500/80 to-cyan-500/80 text-white p-5 rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-all duration-300">
    <div class="flex justify-between items-center mb-4">
      <div class="font-medium">Total Visitors</div>
      <div class="w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center">
        <i class="fas fa-clock"></i>
      </div>
    </div>
    <div id="waiting-visitors" class="text-3xl font-bold mb-1">
      {{ total_visitors }}
    </div>
    <div class="text-white/80 text-sm">Visitors Up To Now</div>
  </div>

  <!-- Appointments -->
  <div
    class="bg-gradient-to-r from-green-500/80 via-emerald-500/80 to-teal-500/80 text-white p-5 rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-all duration-300">
    <div class="flex justify-between items-center mb-4">
      <div class="font-medium">Appointments</div>
      <div class="w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center">
        <i class="fas fa-user-check"></i>
      </div>
    </div>
    <div id="checkedin-visitors" class="text-3xl font-bold mb-1">
      {{ apointment_visitors }}
    </div>
    <div class="text-white/80 text-sm">Scheduled Appointments</div>
  </div>
</div>
<!-- Recent Visitors Table -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-5 mb-6">
  <div class="bg-white p-5 rounded-xl shadow-sm lg:col-span-2">
    <div class="flex justify-between items-center pb-3 border-b border-gray-200 mb-4">
      <h3 class="text-lg font-semibold text-dark">Recent Visitors</h3>
      <!-- <a href="/admin/dashboard" 
               class="bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 
                      text-white px-4 py-2 rounded-lg shadow-md hover:shadow-lg 
                      hover:scale-105 transition-all duration-300">
                View All
            </a> -->
    </div>

    <!-- Table with sticky header -->
    <div class="overflow-y-auto overflow-x-auto bg-white rounded-xl shadow-md custom-scrollbar"
      style="max-height: 400px;">
      <table class="w-full min-w-[800px] border-collapse text-sm">
        <!-- Table Header -->
        <thead
          class="bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 text-white sticky top-0 z-10 text-xs uppercase tracking-wide">
          <tr>
            <th class="py-3 px-4 text-left rounded-tl-lg">Name</th>
            <th class="py-3 px-4 text-left">Phone</th>
            <th class="py-3 px-4 text-left">To Meet</th>
            <th class="py-3 px-4 text-center">Purpose</th>
            <th class="py-3 px-4 text-left">City</th>
            <th class="py-3 px-4 text-center">State</th>
            <th class="py-3 px-4 text-center rounded-tr-lg">Check-In</th>
            <th class="py-3 px-4 text-center rounded-tr-lg">Check-Out</th>
          </tr>
        </thead>

        <!-- Table Body -->
        <tbody class="divide-y divide-gray-200 text-gray-700">
          {% for visitor in recent_visitors %}
          <tr
            class="hover:bg-gradient-to-r hover:from-purple-50 hover:via-pink-50 hover:to-red-50 transition duration-200 ease-in-out">
            <td class="py-3 px-4 font-medium text-gray-900">{{ visitor.name }}</td>
            <td class="py-3 px-4">{{ visitor.phone }}</td>
            <td class="py-3 px-4">{{ visitor.host }}</td>
            <td class="py-3 px-4 text-center">{{ visitor.purpose }}</td>
            <td class="py-3 px-4">{{ visitor.city }}</td>
            <td class="py-3 px-4 text-center">{{ visitor.state }}</td>
            <td class="py-3 px-4 text-center font-semibold text-purple-600">{{ visitor.check_in_time }}</td>
            <td class="py-3 px-4 text-center font-semibold text-purple-600">{{ visitor.check_out_time }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>

{% endblock %}